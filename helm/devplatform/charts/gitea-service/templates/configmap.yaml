apiVersion: v1
kind: ConfigMap
metadata:
  name: gitea-service-config
  namespace: {{ include "gitea-service.namespace" . }}
  labels:
    {{- include "gitea-service.labels" . | nindent 4 }}
data:
  GITEA_URL: {{ .Values.global.gitea.url | quote }}
  GITEA_ADMIN_USER: {{ .Values.global.gitea.adminUser | quote }}
  GITEA_ADMIN_EMAIL: {{ .Values.global.gitea.adminEmail | quote }}
  GITEA_DEFAULT_OWNER: {{ .Values.global.gitea.adminUser | quote }}
  LDAP_MANAGER_URL: "http://ldap-manager.dev-platform.svc.cluster.local:30008"
  PORT: "8081"
  METRICS_PORT: "9091"
  ENVIRONMENT: "production"
  LOG_LEVEL: "info"
  HTTP_CLIENT_TIMEOUT: "30s"
  JWT_EXPIRATION: "24h"
  CORS_ORIGINS: "*"
  SHUTDOWN_TIMEOUT: "30"
  RECONCILE_INTERVAL: {{ ((.Values.controller).reconcileInterval) | default "5m" | quote }}
  WEBHOOK_CHECK_INTERVAL: {{ ((.Values.controller).webhookCheckInterval) | default "2m" | quote }}
  WEBHOOK_TARGET_HOST: "gitea-sync-controller.dev-platform.svc.cluster.local:8081"
  RECONCILE_ENABLED: "true"
  GROUP_SYNC_INTERVAL: {{ ((.Values.controller).groupSyncInterval) | default "5m" | quote }}
  KEYCLOAK_URL: {{ .Values.global.keycloak.url | quote }}
  KEYCLOAK_REALM: {{ .Values.global.keycloak.realm | quote }}
  KEYCLOAK_CLIENT_ID: "gitea-service"
